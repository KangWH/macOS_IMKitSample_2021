//
//  dubeolsik.swift
//  IMKitSample
//
//  Created by 강우현 on 11/25/25.
//

import Foundation

let sebeolsik391 = Keyboard(
    id: "sebeolsik391",
    name: "세벌식 3-91",
    description: "세벌식 3-91 자판입니다.",
    
    inputLevel: .basic,
    outputLevel: .basic,
    
    inputProcessorData: InputProcessorData(keyTable: [
        Key(keyCode: .grave, shift: false, option: false): Expression.parse("'*'"),
        Key(keyCode: .grave, shift: true,  option: false): Expression.parse("0x203B"),
        Key(keyCode: .grave, shift: false, option: true):  Expression.parse("'`'"),
        Key(keyCode: .grave, shift: true,  option: true):  Expression.parse("'~'"),
        Key(keyCode: .one, shift: false, option: false): Expression.parse("H3|_H"),
        Key(keyCode: .one, shift: true,  option: false): Expression.parse("H3|_GG"),
        Key(keyCode: .one, shift: false, option: true):  Expression.parse("'1'"),
        Key(keyCode: .one, shift: true,  option: true):  Expression.parse("'!'"),
        Key(keyCode: .two, shift: false, option: false): Expression.parse("H3|_SS"),
        Key(keyCode: .two, shift: true,  option: false): Expression.parse("H3|_RG"),
        Key(keyCode: .two, shift: false, option: true):  Expression.parse("'2'"),
        Key(keyCode: .two, shift: true,  option: true):  Expression.parse("'@'"),
        Key(keyCode: .three, shift: false, option: false): Expression.parse("H3|_B"),
        Key(keyCode: .three, shift: true,  option: false): Expression.parse("H3|_J"),
        Key(keyCode: .three, shift: false, option: true):  Expression.parse("'3'"),
        Key(keyCode: .three, shift: true,  option: true):  Expression.parse("'#'"),
        Key(keyCode: .four, shift: false, option: false): Expression.parse("H3|YO"),
        Key(keyCode: .four, shift: true,  option: false): Expression.parse("H3|_RP"),
        Key(keyCode: .four, shift: false, option: true):  Expression.parse("'4'"),
        Key(keyCode: .four, shift: true,  option: true):  Expression.parse("'$'"),
        Key(keyCode: .five, shift: false, option: false): Expression.parse("H3|YU"),
        Key(keyCode: .five, shift: true,  option: false): Expression.parse("H3|_RT"),
        Key(keyCode: .five, shift: false, option: true):  Expression.parse("'5'"),
        Key(keyCode: .five, shift: true,  option: true):  Expression.parse("'%'"),
        Key(keyCode: .six, shift: false, option: false): Expression.parse("H3|YA"),
        Key(keyCode: .six, shift: true,  option: false): Expression.parse("'='"),
        Key(keyCode: .six, shift: false, option: true):  Expression.parse("'6'"),
        Key(keyCode: .six, shift: true,  option: true):  Expression.parse("'^'"),
        Key(keyCode: .seven, shift: false, option: false): Expression.parse("H3|YE"),
        Key(keyCode: .seven, shift: true,  option: false): Expression.parse("0x201C"),
        Key(keyCode: .seven, shift: false, option: true):  Expression.parse("'7'"),
        Key(keyCode: .seven, shift: true,  option: true):  Expression.parse("'&'"),
        Key(keyCode: .eight, shift: false, option: false): Expression.parse("H3|EUI"),
        Key(keyCode: .eight, shift: true,  option: false): Expression.parse("0x201D"),
        Key(keyCode: .eight, shift: false, option: true):  Expression.parse("'8'"),
        Key(keyCode: .eight, shift: true,  option: true):  Expression.parse("'*'"),
        Key(keyCode: .nine, shift: false, option: false): Expression.parse("H3|U_"),
        Key(keyCode: .nine, shift: true,  option: false): Expression.parse("''"),
        Key(keyCode: .nine, shift: false, option: true):  Expression.parse("'9'"),
        Key(keyCode: .nine, shift: true,  option: true):  Expression.parse("'('"),
        Key(keyCode: .zero, shift: false, option: false): Expression.parse("H3|K_"),
        Key(keyCode: .zero, shift: true,  option: false): Expression.parse("'~'"),
        Key(keyCode: .zero, shift: false, option: true):  Expression.parse("'0'"),
        Key(keyCode: .zero, shift: true,  option: true):  Expression.parse("')'"),
        Key(keyCode: .minus, shift: false, option: false): Expression.parse("')'"),
        Key(keyCode: .minus, shift: true,  option: false): Expression.parse("';'"),
        Key(keyCode: .minus, shift: false, option: true):  Expression.parse("'-'"),
        Key(keyCode: .minus, shift: true,  option: true):  Expression.parse("'_'"),
        Key(keyCode: .equal, shift: false, option: false): Expression.parse("'>'"),
        Key(keyCode: .equal, shift: true,  option: false): Expression.parse("'+'"),
        Key(keyCode: .equal, shift: false, option: true):  Expression.parse("'='"),
        Key(keyCode: .equal, shift: true,  option: true):  Expression.parse("'+'"),
        Key(keyCode: .yen, shift: false, option: false): Expression.parse("'¥'"),
        Key(keyCode: .yen, shift: true,  option: false): Expression.parse("'|'"),
        Key(keyCode: .yen, shift: false, option: true):  Expression.parse("'¥'"),
        Key(keyCode: .yen, shift: true,  option: true):  Expression.parse("'|'"),
        
        Key(keyCode: .q, shift: false, option: false): Expression.parse("H3|_S"),
        Key(keyCode: .q, shift: true,  option: false): Expression.parse("H3|_P"),
        Key(keyCode: .q, shift: false, option: true):  Expression.parse("'q'"),
        Key(keyCode: .q, shift: true,  option: true):  Expression.parse("'Q'"),
        Key(keyCode: .w, shift: false, option: false): Expression.parse("H3|_R"),
        Key(keyCode: .w, shift: true,  option: false): Expression.parse("H3|_T"),
        Key(keyCode: .w, shift: false, option: true):  Expression.parse("'w'"),
        Key(keyCode: .w, shift: true,  option: true):  Expression.parse("'W'"),
        Key(keyCode: .e, shift: false, option: false): Expression.parse("H3|YEO"),
        Key(keyCode: .e, shift: true,  option: false): Expression.parse("H3|_NJ"),
        Key(keyCode: .e, shift: false, option: true):  Expression.parse("'e'"),
        Key(keyCode: .e, shift: true,  option: true):  Expression.parse("'E'"),
        Key(keyCode: .r, shift: false, option: false): Expression.parse("H3|AE"),
        Key(keyCode: .r, shift: true,  option: false): Expression.parse("H3|_RH"),
        Key(keyCode: .r, shift: false, option: true):  Expression.parse("'r'"),
        Key(keyCode: .r, shift: true,  option: true):  Expression.parse("'R'"),
        Key(keyCode: .t, shift: false, option: false): Expression.parse("H3|EO"),
        Key(keyCode: .t, shift: true,  option: false): Expression.parse("H3|_RS"),
        Key(keyCode: .t, shift: false, option: true):  Expression.parse("'t'"),
        Key(keyCode: .t, shift: true,  option: true):  Expression.parse("'T'"),
        Key(keyCode: .y, shift: false, option: false): Expression.parse("H3|R_"),
        Key(keyCode: .y, shift: true,  option: false): Expression.parse("'5'"),
        Key(keyCode: .y, shift: false, option: true):  Expression.parse("'y'"),
        Key(keyCode: .y, shift: true,  option: true):  Expression.parse("'Y'"),
        Key(keyCode: .u, shift: false, option: false): Expression.parse("H3|D_"),
        Key(keyCode: .u, shift: true,  option: false): Expression.parse("'6'"),
        Key(keyCode: .u, shift: false, option: true):  Expression.parse("'u'"),
        Key(keyCode: .u, shift: true,  option: true):  Expression.parse("'U'"),
        Key(keyCode: .i, shift: false, option: false): Expression.parse("H3|M_"),
        Key(keyCode: .i, shift: true,  option: false): Expression.parse("'7'"),
        Key(keyCode: .i, shift: false, option: true):  Expression.parse("'i'"),
        Key(keyCode: .i, shift: true,  option: true):  Expression.parse("'I'"),
        Key(keyCode: .o, shift: false, option: false): Expression.parse("H3|C_"),
        Key(keyCode: .o, shift: true,  option: false): Expression.parse("'8'"),
        Key(keyCode: .o, shift: false, option: true):  Expression.parse("'o'"),
        Key(keyCode: .o, shift: true,  option: true):  Expression.parse("'O'"),
        Key(keyCode: .p, shift: false, option: false): Expression.parse("H3|P_"),
        Key(keyCode: .p, shift: true,  option: false): Expression.parse("'9'"),
        Key(keyCode: .p, shift: false, option: true):  Expression.parse("'p'"),
        Key(keyCode: .p, shift: true,  option: true):  Expression.parse("'P'"),
        Key(keyCode: .leftBracket, shift: false, option: false): Expression.parse("'('"),
        Key(keyCode: .leftBracket, shift: true,  option: false): Expression.parse("'%'"),
        Key(keyCode: .leftBracket, shift: false, option: true):  Expression.parse("'['"),
        Key(keyCode: .leftBracket, shift: true,  option: true):  Expression.parse("'{'"),
        Key(keyCode: .rightBracket, shift: false, option: false): Expression.parse("'<'"),
        Key(keyCode: .rightBracket, shift: true,  option: false): Expression.parse("'/'"),
        Key(keyCode: .rightBracket, shift: false, option: true):  Expression.parse("']'"),
        Key(keyCode: .rightBracket, shift: true,  option: true):  Expression.parse("'}'"),
        Key(keyCode: .backslash, shift: false, option: false): Expression.parse("':'"),
        Key(keyCode: .backslash, shift: true,  option: false): Expression.parse("'\\'"),
        Key(keyCode: .backslash, shift: false, option: true):  Expression.parse("'\\'"),
        Key(keyCode: .backslash, shift: true,  option: true):  Expression.parse("'|'"),
        
        Key(keyCode: .a, shift: false, option: false): Expression.parse("H3|_Q"),
        Key(keyCode: .a, shift: true,  option: false): Expression.parse("H3|_D"),
        Key(keyCode: .a, shift: false, option: true):  Expression.parse("'a'"),
        Key(keyCode: .a, shift: true,  option: true):  Expression.parse("'A'"),
        Key(keyCode: .s, shift: false, option: false): Expression.parse("H3|_N"),
        Key(keyCode: .s, shift: true,  option: false): Expression.parse("H3|_NH"),
        Key(keyCode: .s, shift: false, option: true):  Expression.parse("'s'"),
        Key(keyCode: .s, shift: true,  option: true):  Expression.parse("'S'"),
        Key(keyCode: .d, shift: false, option: false): Expression.parse("H3|I_"),
        Key(keyCode: .d, shift: true,  option: false): Expression.parse("H3|_RB"),
        Key(keyCode: .d, shift: false, option: true):  Expression.parse("'d'"),
        Key(keyCode: .d, shift: true,  option: true):  Expression.parse("'D'"),
        Key(keyCode: .f, shift: false, option: false): Expression.parse("H3|A_"),
        Key(keyCode: .f, shift: true,  option: false): Expression.parse("H3|_RM"),
        Key(keyCode: .f, shift: false, option: true):  Expression.parse("'f'"),
        Key(keyCode: .f, shift: true,  option: true):  Expression.parse("'F'"),
        Key(keyCode: .g, shift: false, option: false): Expression.parse("H3|EU"),
        Key(keyCode: .g, shift: true,  option: false): Expression.parse("H3|YAE"),
        Key(keyCode: .g, shift: false, option: true):  Expression.parse("'g'"),
        Key(keyCode: .g, shift: true,  option: true):  Expression.parse("'G'"),
        Key(keyCode: .h, shift: false, option: false): Expression.parse("H3|N_"),
        Key(keyCode: .h, shift: true,  option: false): Expression.parse("'0'"),
        Key(keyCode: .h, shift: false, option: true):  Expression.parse("'h'"),
        Key(keyCode: .h, shift: true,  option: true):  Expression.parse("'H'"),
        Key(keyCode: .j, shift: false, option: false): Expression.parse("H3|Q_"),
        Key(keyCode: .j, shift: true,  option: false): Expression.parse("'1'"),
        Key(keyCode: .j, shift: false, option: true):  Expression.parse("'j'"),
        Key(keyCode: .j, shift: true,  option: true):  Expression.parse("'J'"),
        Key(keyCode: .k, shift: false, option: false): Expression.parse("H3|G_"),
        Key(keyCode: .k, shift: true,  option: false): Expression.parse("'2'"),
        Key(keyCode: .k, shift: false, option: true):  Expression.parse("'k'"),
        Key(keyCode: .k, shift: true,  option: true):  Expression.parse("'K'"),
        Key(keyCode: .l, shift: false, option: false): Expression.parse("H3|J_"),
        Key(keyCode: .l, shift: true,  option: false): Expression.parse("'3'"),
        Key(keyCode: .l, shift: false, option: true):  Expression.parse("'l'"),
        Key(keyCode: .l, shift: true,  option: true):  Expression.parse("'L'"),
        Key(keyCode: .semicolon, shift: false, option: false): Expression.parse("H3|B_"),
        Key(keyCode: .semicolon, shift: true,  option: false): Expression.parse("'4'"),
        Key(keyCode: .semicolon, shift: false, option: true):  Expression.parse("';'"),
        Key(keyCode: .semicolon, shift: true,  option: true):  Expression.parse("':'"),
        Key(keyCode: .quote, shift: false, option: false): Expression.parse("H3|T_"),
        Key(keyCode: .quote, shift: true, option: false): Expression.parse("'·'"),
        Key(keyCode: .quote, shift: false, option: true): Expression.parse("''"),
        Key(keyCode: .quote, shift: true, option: true): Expression.parse("'\"'"),
        
        Key(keyCode: .section, shift: false, option: false): Expression.parse("'§'"),
        Key(keyCode: .section, shift: true,  option: false): Expression.parse("'±'"),
        Key(keyCode: .section, shift: false, option: true):  Expression.parse("'§'"),
        Key(keyCode: .section, shift: true,  option: true):  Expression.parse("'±'"),
        Key(keyCode: .z, shift: false, option: false): Expression.parse("H3|_M"),
        Key(keyCode: .z, shift: true,  option: false): Expression.parse("H3|_C"),
        Key(keyCode: .z, shift: false, option: true):  Expression.parse("'z'"),
        Key(keyCode: .z, shift: true,  option: true):  Expression.parse("'Z'"),
        Key(keyCode: .x, shift: false, option: false): Expression.parse("H3|_G"),
        Key(keyCode: .x, shift: true,  option: false): Expression.parse("H3|_BS"),
        Key(keyCode: .x, shift: false, option: true):  Expression.parse("'x'"),
        Key(keyCode: .x, shift: true,  option: true):  Expression.parse("'X'"),
        Key(keyCode: .c, shift: false, option: false): Expression.parse("H3|E_"),
        Key(keyCode: .c, shift: true,  option: false): Expression.parse("H3|_K"),
        Key(keyCode: .c, shift: false, option: true):  Expression.parse("'c'"),
        Key(keyCode: .c, shift: true,  option: true):  Expression.parse("'C'"),
        Key(keyCode: .v, shift: false, option: false): Expression.parse("H3|O_"),
        Key(keyCode: .v, shift: true,  option: false): Expression.parse("H3|_GS"),
        Key(keyCode: .v, shift: false, option: true):  Expression.parse("'v'"),
        Key(keyCode: .v, shift: true,  option: true):  Expression.parse("'V'"),
        Key(keyCode: .b, shift: false, option: false): Expression.parse("H3|U_"),
        Key(keyCode: .b, shift: true,  option: false): Expression.parse("'?'"),
        Key(keyCode: .b, shift: false, option: true):  Expression.parse("'b'"),
        Key(keyCode: .b, shift: true,  option: true):  Expression.parse("'B'"),
        Key(keyCode: .n, shift: false, option: false): Expression.parse("H3|S_"),
        Key(keyCode: .n, shift: true,  option: false): Expression.parse("'-'"),
        Key(keyCode: .n, shift: false, option: true):  Expression.parse("'n'"),
        Key(keyCode: .n, shift: true,  option: true):  Expression.parse("'N'"),
        Key(keyCode: .m, shift: false, option: false): Expression.parse("H3|H_"),
        Key(keyCode: .m, shift: true,  option: false): Expression.parse("'\"'"),
        Key(keyCode: .m, shift: false, option: true):  Expression.parse("'m'"),
        Key(keyCode: .m, shift: true,  option: true):  Expression.parse("'M'"),
        Key(keyCode: .comma, shift: false, option: false): Expression.parse("','"),
        Key(keyCode: .comma, shift: true,  option: false): Expression.parse("','"),
        Key(keyCode: .comma, shift: false, option: true):  Expression.parse("','"),
        Key(keyCode: .comma, shift: true,  option: true):  Expression.parse("'<'"),
        Key(keyCode: .period, shift: false, option: false): Expression.parse("'.'"),
        Key(keyCode: .period, shift: true,  option: false): Expression.parse("'.'"),
        Key(keyCode: .period, shift: false, option: true):  Expression.parse("'.'"),
        Key(keyCode: .period, shift: true,  option: true):  Expression.parse("'>'"),
        Key(keyCode: .slash, shift: false, option: false): Expression.parse("H3|O_"),
        Key(keyCode: .slash, shift: true,  option: false): Expression.parse("'!'"),
        Key(keyCode: .slash, shift: false, option: true):  Expression.parse("'/'"),
        Key(keyCode: .slash, shift: true,  option: true):  Expression.parse("'?'"),
        Key(keyCode: .underscore, shift: false, option: false): Expression.parse("'_'"),
        Key(keyCode: .underscore, shift: true, option: false): Expression.parse("'_'"),
        Key(keyCode: .underscore, shift: false, option: true): Expression.parse("'_'"),
        Key(keyCode: .underscore, shift: true, option: true): Expression.parse("'_'"),
    ]),
    
    outputProcessorData: OutputProcessorData(
        deleteKeyRules: [],
        
        compositionRules: CompositionRule(
            leading: [
                [Jamo(.G_, key: .sebeolsik), Jamo(.G_, key: .sebeolsik)]: Jamo(.GG, key: .sebeolsik),
                [Jamo(.D_, key: .sebeolsik), Jamo(.D_, key: .sebeolsik)]: Jamo(.DD, key: .sebeolsik),
                [Jamo(.B_, key: .sebeolsik), Jamo(.B_, key: .sebeolsik)]: Jamo(.BB, key: .sebeolsik),
                [Jamo(.S_, key: .sebeolsik), Jamo(.S_, key: .sebeolsik)]: Jamo(.SS, key: .sebeolsik),
                [Jamo(.J_, key: .sebeolsik), Jamo(.J_, key: .sebeolsik)]: Jamo(.JJ, key: .sebeolsik),
            ],
            medial: [
                [Jamo(.O_, key: .sebeolsik), Jamo(.A_, key: .sebeolsik)]: Jamo(.WA, key: .sebeolsik),
                [Jamo(.O_, key: .sebeolsik), Jamo(.AE, key: .sebeolsik)]: Jamo(.WAE, key: .sebeolsik),
                [Jamo(.O_, key: .sebeolsik), Jamo(.I_, key: .sebeolsik)]: Jamo(.OI, key: .sebeolsik),
                [Jamo(.U_, key: .sebeolsik), Jamo(.EO, key: .sebeolsik)]: Jamo(.UEO, key: .sebeolsik),
                [Jamo(.U_, key: .sebeolsik), Jamo(.E_, key: .sebeolsik)]: Jamo(.WE, key: .sebeolsik),
                [Jamo(.U_, key: .sebeolsik), Jamo(.I_, key: .sebeolsik)]: Jamo(.WI, key: .sebeolsik),
                [Jamo(.EU, key: .sebeolsik), Jamo(.I_, key: .sebeolsik)]: Jamo(.EUI, key: .sebeolsik),
            ],
            trailing: [
                [Jamo(._G, key: .sebeolsik), Jamo(._G, key: .sebeolsik)]: Jamo(._GG, key: .sebeolsik),
                [Jamo(._G, key: .sebeolsik), Jamo(._S, key: .sebeolsik)]: Jamo(._GS, key: .sebeolsik),
                [Jamo(._N, key: .sebeolsik), Jamo(._J, key: .sebeolsik)]: Jamo(._NJ, key: .sebeolsik),
                [Jamo(._N, key: .sebeolsik), Jamo(._H, key: .sebeolsik)]: Jamo(._NH, key: .sebeolsik),
                [Jamo(._R, key: .sebeolsik), Jamo(._G, key: .sebeolsik)]: Jamo(._RG, key: .sebeolsik),
                [Jamo(._R, key: .sebeolsik), Jamo(._M, key: .sebeolsik)]: Jamo(._RM, key: .sebeolsik),
                [Jamo(._R, key: .sebeolsik), Jamo(._B, key: .sebeolsik)]: Jamo(._RB, key: .sebeolsik),
                [Jamo(._R, key: .sebeolsik), Jamo(._S, key: .sebeolsik)]: Jamo(._RS, key: .sebeolsik),
                [Jamo(._R, key: .sebeolsik), Jamo(._T, key: .sebeolsik)]: Jamo(._RT, key: .sebeolsik),
                [Jamo(._R, key: .sebeolsik), Jamo(._P, key: .sebeolsik)]: Jamo(._RP, key: .sebeolsik),
                [Jamo(._R, key: .sebeolsik), Jamo(._H, key: .sebeolsik)]: Jamo(._RH, key: .sebeolsik),
                [Jamo(._B, key: .sebeolsik), Jamo(._S, key: .sebeolsik)]: Jamo(._BS, key: .sebeolsik),
                [Jamo(._S, key: .sebeolsik), Jamo(._S, key: .sebeolsik)]: Jamo(._SS, key: .sebeolsik),
            ]
        ),
        
        automataRules: [
            0: AutomataEntry(expression: Expression.parse("A ? 1 : B ? 2 : C ? 3 : 0")),
            1: AutomataEntry(expression: Expression.parse("A ? 1 : B ? 2 : C ? 3 : 0")),
            2: AutomataEntry(expression: Expression.parse("B ? 2 : C ? 3 : 0")),
            3: AutomataEntry(expression: Expression.parse("C ? 3 : 0")),
        ]
    )
)
